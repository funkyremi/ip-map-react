(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(module,exports,__webpack_require__){__webpack_require__(164),__webpack_require__(241),module.exports=__webpack_require__(242)},242:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(43),__webpack_require__(44),__webpack_require__(26),__webpack_require__(54);var _storybook_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(61),req=__webpack_require__(311);Object(_storybook_react__WEBPACK_IMPORTED_MODULE_4__.configure)(function loadStories(){req.keys().forEach(function(filename){return req(filename)})},module)}.call(this,__webpack_require__(115)(module))},311:function(module,exports,__webpack_require__){var map={"./index.stories.js":312};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=311},312:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_storybook_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(61),_src_Map_jsx__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(62),_ref=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src_Map_jsx__WEBPACK_IMPORTED_MODULE_2__.a,null),_ref2=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src_Map_jsx__WEBPACK_IMPORTED_MODULE_2__.a,{ip:"1.1.1.1"}),_ref3=react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_src_Map_jsx__WEBPACK_IMPORTED_MODULE_2__.a,{ip:"8.8.8.8",width:"400",height:"400"});Object(_storybook_react__WEBPACK_IMPORTED_MODULE_1__.storiesOf)("Map",module).add("Client IP",function(){return _ref}).add("Specific IP",function(){return _ref2}).add("Specific size",function(){return _ref3})}.call(this,__webpack_require__(115)(module))},62:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(42),__webpack_require__(34),__webpack_require__(155),__webpack_require__(26),__webpack_require__(10),__webpack_require__(145),__webpack_require__(146),__webpack_require__(317),__webpack_require__(318);var react=__webpack_require__(6),react_default=__webpack_require__.n(react),prop_types=__webpack_require__(46),prop_types_default=__webpack_require__.n(prop_types),dist=__webpack_require__(161),dist_default=__webpack_require__.n(dist),uniqueId=__webpack_require__(162),uniqueId_default=__webpack_require__.n(uniqueId),browser=__webpack_require__(91),browser_default=__webpack_require__.n(browser),getIpData=function(ip,width,height){return new Promise(function(resolve,reject){browser_default()("https://ipapi.co/".concat(ip,"/json/")).then(function(res){return res.json()}).then(function(res){res.mapUrl="https://static-maps.yandex.ru/1.x/?lang=en-US&ll=".concat(res.longitude,",").concat(res.latitude,"&z=10&l=map&size=").concat(width,",").concat(height),resolve(res)}).catch(reject)})};function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__.d(__webpack_exports__,"a",function(){return Map_Map});var Map_Map=function(_React$Component){function Map(props){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Map),(_this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,_getPrototypeOf(Map).call(this,props))).tooltipId=uniqueId_default()(),_this.state={data:{mapUrl:""},formatedData:""},_this.formatData=_this.formatData.bind(_assertThisInitialized(_this)),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Map,react_default.a.Component),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Map,[{key:"componentDidMount",value:(_componentDidMount=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}var gen=fn.apply(self,args);_next(void 0)})}}(regeneratorRuntime.mark(function _callee(){var ipData,currentIp,_ipData;return regeneratorRuntime.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!this.props.ip){_context.next=13;break}return _context.prev=1,_context.next=4,getIpData(this.props.ip,this.props.width,this.props.height);case 4:ipData=_context.sent,this.setState({data:ipData,formatedData:this.formatData(ipData)}),_context.next=11;break;case 8:_context.prev=8,_context.t0=_context.catch(1),console.error(_context.t0);case 11:_context.next=26;break;case 13:return _context.prev=13,_context.next=16,new Promise(function(resolve,reject){browser_default()("https://api.ipify.org?format=json").then(function(res){return res.json()}).then(function(res){resolve(res)}).catch(reject)});case 16:return currentIp=_context.sent,_context.next=19,getIpData(currentIp.ip,this.props.width,this.props.height);case 19:_ipData=_context.sent,this.setState({data:_ipData,formatedData:this.formatData(_ipData)}),_context.next=26;break;case 23:_context.prev=23,_context.t1=_context.catch(13),console.error(_context.t1);case 26:case"end":return _context.stop()}},_callee,this,[[1,8],[13,23]])})),function componentDidMount(){return _componentDidMount.apply(this,arguments)})},{key:"formatData",value:function formatData(data){var formatedData="";for(var key in data)formatedData+="".concat(key,": ").concat(data[key],"<br />");return formatedData}},{key:"render",value:function render(){var style={opacity:1,backgroundImage:"url(".concat(this.state.data.mapUrl,")"),display:"block",width:"".concat(this.props.width,"px"),height:"".concat(this.props.height,"px")};return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("div",{style:style,"data-tip":this.state.formatedData,"data-for":this.tooltipId}),react_default.a.createElement(dist_default.a,{id:this.tooltipId,type:"dark",html:!0}))}}]),Map;var _componentDidMount}();Map_Map.displayName="Map",Map_Map.propTypes={ip:prop_types_default.a.string,width:prop_types_default.a.string,height:prop_types_default.a.string},Map_Map.defaultProps={ip:null,width:"600",height:"300"},Map_Map.__docgenInfo={description:"",methods:[{name:"formatData",docblock:null,modifiers:[],params:[{name:"data",type:null}],returns:null}],displayName:"Map",props:{ip:{defaultValue:{value:"null",computed:!1},type:{name:"string"},required:!1,description:""},width:{defaultValue:{value:'"600"',computed:!1},type:{name:"string"},required:!1,description:""},height:{defaultValue:{value:'"300"',computed:!1},type:{name:"string"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Map.jsx"]={name:"Map",docgenInfo:Map_Map.__docgenInfo,path:"src/Map.jsx"})}},[[163,1,2]]]);
//# sourceMappingURL=main.e348cd403a6a8d6ce920.bundle.js.map